<?php

/**
 * Implements hook_node_info().
 */
function metabio_node_info() {
  return array(
    'metabio' => array(
      'name' => t('Metabio Dataset'),
      'base' => 'metabio',
      'description' => t('Biodiversity metadata entry form for datasets.'),
    ),
  );
}

// Implementation of hook_menu(): used to create a page for the form
function metabio_menu() {
  $items = array();

  return $items;
}

// Form builder. Form ID = function name
function metabio_form(&$node, $form_state) {
  $form['metabio_dataset'] = array(
    '#type' => 'fieldset', 
    '#title' => t('Overview'), 
    '#collapsible' => TRUE, 
    '#collapsed' => FALSE, 
    '#tree' => TRUE,
  );
  $form['metabio_dataset']['name'] = array(
    '#type' => 'textfield',
    '#title' => t('Dataset name'),
    '#size' => 50,
    '#required' => FALSE,
  );
  $form['metabio_dataset']['description'] = array(
    '#type' => 'textarea',
    '#title' => t('Dataset description'),
    '#cols' => 50,
    '#rows' => 6,
    '#required' => FALSE,
  );
  $form['metabio_dataset']['collector'] = array(
    '#type' => 'textfield',
    '#title' => t('Who collected the data?'),
    '#size' => 50,
    '#required' => FALSE,
  );
  $form['#submit'][] = 'metabio_form_submit';
  return $form;
}

// Form submit handler. Default handler is formid_submit()
function metabio_form_submit($form, &$form_state) {
  //do additional stuff to form_state as needed
}

// Form validation handler. 
function metabio_form_validate($form, &$form_state) {
}

function metabio_insert($node) {
  debug($node);
  //dump stuff into the metabio_dataset table here
}

function metabio_update(&$node) {
  debug($node);
}

function metabio_load(&$node) {
  //add metabio content to the node here when it's loaded
}
