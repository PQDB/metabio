<?php

/**
 * Implements hook_node_info().
 */
function metabio_node_info() {
  return array(
    'metabio' => array(
      'name' => t('Metabio Dataset'),
      'base' => 'metabio',
      'description' => t('Biodiversity metadata entry form for datasets.'),
    ),
  );
}

// Implementation of hook_menu(): used to create a page for the form
function metabio_menu() {
  $items = array();

  return $items;
}

// Form builder. Form ID = function name
function metabio_form($form_state) {
$form['Overview'] = array(
  '#type' => 'fieldset', 
  '#title' => t('Overview'), 
  '#collapsible' => TRUE, 
  '#collapsed' => FALSE, 
  '#tree' => TRUE,
);
$form['Overview']['Dataset_name'] = array(
    '#type' => 'textfield',
    '#title' => t('Dataset name'),
    '#size' => 50,
    '#required' => FALSE,
);
  $form['Overview']['Dataset_description'] = array(
    '#type' => 'textarea',
    '#title' => t('Dataset description'),
    '#cols' => 50,
    '#rows' => 6,
    '#required' => FALSE,
  );
$form['Overview']['Data_collector'] = array(
    '#type' => 'textfield',
    '#title' => t('Who collected the data?'),
    '#size' => 50,
    '#required' => FALSE,
);
$form['submit'] = array(
    '#type' => 'submit',
    '#value' => t('Submit'),
);
  return $form;
}


// Form validation handler. 
function metabio_form_validate($form, &$form_state) {
}

// Form submit handler. Default handler is formid_submit()
function metabio_form_submit($form, &$form_state) {
  $nid=db_insert('metabio_form_table')->fields(array(
  'dataset_name'=>$form_state['values']['Overview']['Dataset_name'],
  'dataset_description'=>$form_state['values']['Overview']['Dataset_description'],
  'data_collector'=>$form_state['values']['Overview']['Data_collector'],
  ))
  ->execute();
  drupal_set_message(t('Form successfully submitted'));
}
